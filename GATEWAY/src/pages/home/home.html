  <ion-header>
    <ion-navbar align-title="center">
      <!-- Toggle left side menu -->
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>Tiles</ion-title>
    </ion-navbar>
    <ion-toolbar>
      <!--
        TODO
        this should be a button that triggers the showConnectMQTTPopup()
        from the old code
      -->
      <ion-title >{{serverConnectStatusMsg}}
        <button ion-button small style="float: right;" (click)="connectToServer()">Connect</button>
      </ion-title>
    </ion-toolbar>
  </ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="refreshDevices($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <ion-item no-lines>{{statusMsg}}</ion-item>
  <ion-list style="margin-left: 10px; margin-right: 10px;">
    <ion-item style="margin-bottom: 7px;" color="light" *ngFor="let device of devices">
      <div class="row row-center">
        <div class="col col-75">
          <b>{{device.name}}</b><br>ID: {{device.id}}
        </div>
        <div class="col">
          <button ion-button small color="positive" style="float: right;" (click)="bleService.connect(device)" [hidden]="device.connected">Connect</button>
          <button ion-button small id="disconnectButton" style="float: right;" (click)="bleService.disconnect(device)" [hidden]="!device.connected">Disconnect</button>
          <button ion-button small id="fetchEventMappingsButton" style="float: right;" (click)="fetchEventMappings(device)" [hidden]="!device.connected"> FETCH EVT
          </button>
        </div>
      </div>
      <ion-list [hidden]="!device.connected" no-lines>
        <ion-item color="light" name="item-icon-right">Button
          <ion-badge badge-stable style="right: 16px;" [hidden]="device.buttonPressed">Released</ion-badge>
          <ion-badge badge-balanced style="right: 16px;" [hidden]="!device.buttonPressed">Pressed</ion-badge>
        </ion-item>
        <ion-item color="light">
          <!--ion-label>LED Light </ion-label-->
          <ion-toggle [(ngModel)]="device.ledOn" (ionChange)="bleService.sendData(device, 'led,on,red')"></ion-toggle>
        </ion-item>
        <ion-item color="light" class="item-icon-right">
          <button ion-button small color="positive" (click)="changeNamePop(device)">Update name</button>
        </ion-item>
      </ion-list>
    </ion-item>
  </ion-list>
</ion-content>

<!--
  TODO: move the code from the old www/index.html here.
  This might require changing some of it where the tags are updated
  or angular 1 is used.
-->
